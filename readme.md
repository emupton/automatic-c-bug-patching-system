# Undergraduate Dissertation
My dissertation can be found in PDF format at the root directory of this repository.

This project centred around using ANTLR (ANoTher Language Recognition tool) or traverse the source code of C source files. It also made heavy use of LLVM's scan-build to optimise the traversal by sending the source code first through scan-build to pinpoint any known errors. Once bugs were identified both by scan-build and fed through to the traversal module chunks of the AST (abstract syntax tree) are substituted with predefined fixes.

Resources:

http://www.antlr.org/api/Java/
https://sourceforge.net/projects/cppcheck/files/cppcheck
http://clang-analyzer.llvm.org/scan-build.htm


### Technical documentation
Currently developing prototypes, code poorly documented

The system is broken down into three sub-systems; a shell script, a bug report parser, and a central system.

![System diagram](https://i.gyazo.com/808bde9106f314df2d241b628e26be64.png)

#### Orchestration shell script
##### `/unified_script.sh`
The shell script accepts three command-line input arguments: an input file location, a 'miscellaneous directory', and an output file location.

For example:

	unified_script.sh  ~/bugs/program.c ~/bugs/misc_files ~/bugs/program_fix.c

`~/bugs/program.c` is a .C file that the user suspects has some kind of bug. The shell script then makes a call to `scan-build` ([the clang static analyzer](http://clang-analyzer.llvm.org)) with `~/bugs/misc_files` as the output directory and `~/bugs/program.c` as the file to be analysed.

 If any bugs are detected in the .c file then a HTML file bug report will be outputted to the miscellaneous directory.
 
 The script then determines if there are any generated bug reports in the file and if so will pass the relevant HTML files to the bug report parser.
 
 The bug report parser's output is then store in a variable that is used as an argument when the script then goes onto to make a call to the central system, along with the input and output file locations.
 
#### Bug parser
#####
`/parser.jar` , `/BugReportParser`
 This takes as input a string file location to a bug report generated by a call to `scan-build`. It makes use of the JSoup HTML parsing framework.
 
 It will obtain all the bug description string along with the relevant lines in the bug path of the bug report.
 
 A sample output:
 
 `Result of 'malloc' is converted to a pointer of type 'int', which is incompatible with sizeof operand type 'short',6`
 
 Where everything `6` is the only line in the bugpath, and the rest of the output is the bug description.
 
#### Central system
##### `/centralsys.jar` , `/CentralSystem`

 This accepts as input a string of that follows the format of `$bug_descriptor, $lineNo1, $lineNo2, ..., $lineNoN`, such as is found with the outputs generated by `parser.jar`, and a .C file location that's associated with a bug of a nature described in the first argument's string, and then a file location for the outputted fix.

 Based on `$bug_descriptor`'s content we apply a fix to the relevant lines found in the input file. We then duplicate the input file line-by-line, with the exception of the lines that have been overwritten by the relevant fixes.
